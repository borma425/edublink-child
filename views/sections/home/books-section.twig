    <!-- ===== START: Books Section ===== -->
    <section id="books" class="learnsimply-books-section">
        <div class="learnsimply-section-container">
            <div class="learnsimply-section-header">
                <img src="{{ theme_uri }}/assets/icon-books.png" alt="" class="learnsimply-section-icon">
                <h2 class="learnsimply-section-title">الكتب الموجوده</h2>
            </div>
            <p class="learnsimply-section-description">
                كتب تعليمية تساعدك تفهم البرمجة وتطبّق المفاهيم خطوة بخطوة.
            </p>

            <div class="learnsimply-books-grid">
                {% if books and books|length > 0 %}
                    {% for book in books %}
                <article class="book-card">
                    <!-- Book Image -->
                    <div class="book-image">
                                <img src="{{ book.thumbnail ?: theme_uri ~ '/assets/img/book.png' }}" alt="{{ book.title }}" />
                    </div>

                    <!-- Header: Badge + Instructor -->
                    <div class="book-header">
                        <div class="instructor-info">
                            <div class="instructor-text">
                                        {% if book.author %}
                                            <p class="name">{{ book.author.display_name }}</p>
                                            <p class="title">
                                                {% if book.author.user_meta.description %}
                                                    {{ book.author.user_meta.description }}
                                                {% else %}
                                                    مؤلف
                                                {% endif %}
                                            </p>
                                        {% else %}
                                            <p class="name">مؤلف</p>
                                            <p class="title">كاتب</p>
                                        {% endif %}
                            </div>

                            <div class="instructor-avatar">
                                <div class="avatar-glow avatar-glow-1">
                                    <svg fill="none" viewBox="0 0 37.0813 37.0813">
                                                <g filter="url(#filter0_f_book_{{ loop.index }})">
                                                    <circle cx="18.5406" cy="18.5406" fill="url(#paint0_linear_book_{{ loop.index }})" r="16.6701" />
                                        </g>
                                        <defs>
                                                    <filter colorInterpolationFilters="sRGB" filterUnits="userSpaceOnUse" height="37.0813" id="filter0_f_book_{{ loop.index }}" width="37.0813" x="0" y="0">
                                                <feFlood floodOpacity="0" result="BackgroundImageFix" />
                                                <feBlend in="SourceGraphic" in2="BackgroundImageFix" mode="normal" result="shape" />
                                                        <feGaussianBlur result="effect1_foregroundBlur_book_{{ loop.index }}" stdDeviation="0.935285" />
                                            </filter>
                                                    <linearGradient gradientUnits="userSpaceOnUse" id="paint0_linear_book_{{ loop.index }}" x1="18.5406" x2="18.5406" y1="1.87057" y2="35.2107">
                                                <stop stopColor="#F8EEE4" />
                                                <stop offset="1" stopColor="#F8EEE4" stopOpacity="0" />
                                            </linearGradient>
                                        </defs>
                                    </svg>
                                </div>
                                <div class="avatar-glow avatar-glow-2">
                                    <svg fill="none" viewBox="0 0 37.0813 37.0813">
                                                <g filter="url(#filter0_f_book2_{{ loop.index }})">
                                                    <circle cx="18.5406" cy="18.5406" fill="url(#paint0_linear_book2_{{ loop.index }})" r="16.6701" />
                                        </g>
                                        <defs>
                                                    <filter colorInterpolationFilters="sRGB" filterUnits="userSpaceOnUse" height="37.0813" id="filter0_f_book2_{{ loop.index }}" width="37.0813" x="0" y="0">
                                                <feFlood floodOpacity="0" result="BackgroundImageFix" />
                                                <feBlend in="SourceGraphic" in2="BackgroundImageFix" mode="normal" result="shape" />
                                                        <feGaussianBlur result="effect1_foregroundBlur_book2_{{ loop.index }}" stdDeviation="0.935285" />
                                            </filter>
                                                    <linearGradient gradientUnits="userSpaceOnUse" id="paint0_linear_book2_{{ loop.index }}" x1="18.5406" x2="18.5406" y1="1.87057" y2="35.2107">
                                                <stop stopColor="#F8EEE4" />
                                                <stop offset="1" stopColor="#F8EEE4" stopOpacity="0" />
                                            </linearGradient>
                                        </defs>
                                    </svg>
                                </div>
                                        {% if book.author and book.author.avatar %}
                                            <img src="{{ book.author.avatar }}" alt="{{ book.author.display_name }}" />
                                        {% else %}
                                            <img src="{{ theme_uri }}/assets/img/card_image.png" alt="مؤلف" />
                                        {% endif %}
                            </div>
                        </div>

                        <div class="book-badge">
                            <p>منتج</p>
                        </div>
                    </div>

                    <!-- Book Title -->
                    <div class="book-title">
                                <p>{{ book.title }}</p>
                    </div>

                    <!-- Book Info -->
                    <div class="book-info">
                        {% if book.stock_quantity or book.stock_status %}
                        <div class="info-item">
                            <img class="info-icon" src="{{ theme_uri }}/assets/img/Archive Check.png" alt="متوفر" />
                            <p>
                                {% if book.stock_quantity %}
                                    +{{ book.stock_quantity }} متوفر
                                {% elseif book.stock_status == 'instock' %}
                                    متوفر
                                {% else %}
                                    غير متوفر
                                {% endif %}
                            </p>
                        </div>

                        <div class="info-divider">
                            <svg fill="none" viewBox="0 0 32 1">
                                <line stroke="white" strokeOpacity="0.05" x2="32" y1="0.5" y2="0.5" />
                            </svg>
                        </div>
                        {% endif %}

                        <div class="info-item">
                            <svg class="info-icon" fill="none" viewBox="0 0 24 24">
                                <path d="M4 19.5A2.5 2.5 0 016.5 17H20" stroke="#999EB2" strokeWidth="1.5"/>
                                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z" stroke="#999EB2" strokeWidth="1.5"/>
                                <path d="M8 7h8M8 10.5h5" stroke="#999EB2" strokeWidth="1.5" strokeLinecap="round"/>
                                <path d="M19.5 19H8" stroke="#999EB2" strokeWidth="1.5" strokeLinecap="round"/>
                            </svg>
                            <p>
                                {% if book.pages and book.pages != '' %}
                                    {{ book.pages }} صفحة
                                {% else %}
                                    —
                                {% endif %}
                            </p>
                        </div>
                    </div>

                    <!-- Price Section -->
                    <div class="price-section">
                                {% if book.is_free or (book.price == 0 and not book.regular_price and not book.sale_price) %}
                        {# Free book #}
                        <div class="price-display">
                            <p class="new-price">مجاني</p>
                        </div>
                                {% else %}
                                {% if book.discount_percent > 0 %}
                        <div class="discount-badge">
                                        <p>خصم {{ book.discount_percent }}%</p>
                        </div>
                                {% endif %}

                        <div class="price-display">
                                    {% if book.regular_price and book.sale_price %}
                                        <p class="old-price">{{ book.regular_price|number_format(2, '.', ',') }} ج.م</p>
                                        <p class="new-price">{{ book.sale_price|number_format(2, '.', ',') }} ج.م</p>
                                    {% else %}
                                        <p class="new-price">{{ book.price|number_format(2, '.', ',') }} ج.م</p>
                                    {% endif %}
                        </div>
                                {% endif %}
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                                {% if book.is_free or (book.price == 0 and not book.regular_price and not book.sale_price) %}
                            {# Free book - show get it free button #}
                            <a 
                                href="{{ book.product_url }}" 
                                class="learnsimply-buy-now-button buy-button"
                            >
                                <span>احصل عليه مجاناً</span>
                            </a>
                                {% else %}
                                    {# Paid book - show cart and buy buttons #}
                                <button 
                                    type="button" 
                                    class="learnsimply-add-cart-button cart-button" 
                                    aria-label="أضف إلى السلة"
                                    data-product-id="{{ book.id }}"
                                    data-product-url="{{ book.product_url }}"
                                >
                            <img class="cart-icon" src="{{ theme_uri }}/assets/img/Cart.png" alt="سلة التسوق" />
                        </button>

                                <a 
                                    href="{{ book.product_url }}" 
                                    class="learnsimply-buy-now-button buy-button"
                                >
                            <span>اشتر الآن</span>
                                </a>
                                {% endif %}
                    </div>
                </article>
                    {% endfor %}
                {% else %}
                    <!-- Fallback: No books available -->
                    <div class="no-books-message" style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #999;">
                        <p>لا توجد كتب متاحة حالياً</p>
                    </div>
                {% endif %}
        </div>

        <a href="{{ site.url }}/كتب-برمجية/" class="learnsimply-view-all-button">عرض كل الكتب</a>
    </section>
    <!-- ===== END: Books Section ===== -->